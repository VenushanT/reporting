{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Venushan\\\\Downloads\\\\reporting\\\\frontend\\\\src\\\\components\\\\Map.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport L from 'leaflet';\n\n// Fix for default marker icons in Leaflet with React\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png')\n});\nfunction LocationMarker({\n  onLocationSelect\n}) {\n  _s();\n  const map = useMapEvents({\n    click(e) {\n      onLocationSelect({\n        lat: e.latlng.lat,\n        lng: e.latlng.lng\n      });\n    }\n  });\n  return null;\n}\n_s(LocationMarker, \"D2AvXN8Rt/r3DPix6IJfcPGmgF0=\", false, function () {\n  return [useMapEvents];\n});\n_c = LocationMarker;\nfunction Map({\n  onLocationSelect,\n  selectedLocation,\n  modalOpen\n}) {\n  _s2();\n  const mapRef = useRef(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    if (mapRef.current && selectedLocation) {\n      mapRef.current.setView([selectedLocation.lat, selectedLocation.lng], 15);\n    }\n  }, [selectedLocation]);\n\n  // Lower z-index of all Leaflet panes when modal is open\n  useEffect(() => {\n    const paneSelectors = ['.leaflet-container', '.leaflet-pane', '.leaflet-map-pane', '.leaflet-tile-pane', '.leaflet-marker-pane', '.leaflet-shadow-pane', '.leaflet-overlay-pane', '.leaflet-tooltip-pane', '.leaflet-popup-pane'];\n    if (modalOpen) {\n      paneSelectors.forEach(sel => {\n        document.querySelectorAll(sel).forEach(el => {\n          el.dataset.prevZ = el.style.zIndex;\n          el.style.zIndex = '1';\n        });\n      });\n    } else {\n      paneSelectors.forEach(sel => {\n        document.querySelectorAll(sel).forEach(el => {\n          if (el.dataset.prevZ !== undefined) {\n            el.style.zIndex = el.dataset.prevZ;\n            delete el.dataset.prevZ;\n          } else {\n            el.style.zIndex = '';\n          }\n        });\n      });\n    }\n  }, [modalOpen]);\n  const handleFindMyLocation = () => {\n    if (!navigator.geolocation) {\n      setError('Geolocation is not supported by your browser');\n      return;\n    }\n    setError(null);\n    navigator.geolocation.getCurrentPosition(position => {\n      const {\n        latitude,\n        longitude\n      } = position.coords;\n      const location = {\n        lat: latitude,\n        lng: longitude\n      };\n      onLocationSelect(location);\n      if (mapRef.current) {\n        mapRef.current.setView([latitude, longitude], 15);\n      }\n    }, error => {\n      switch (error.code) {\n        case error.PERMISSION_DENIED:\n          setError('Please allow location access to use this feature');\n          break;\n        case error.POSITION_UNAVAILABLE:\n          setError('Location information is unavailable');\n          break;\n        case error.TIMEOUT:\n          setError('Location request timed out');\n          break;\n        default:\n          setError('An error occurred while getting your location');\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-[400px] w-full rounded-lg overflow-hidden shadow-xl border border-gray-700\",\n      children: /*#__PURE__*/_jsxDEV(MapContainer, {\n        center: [51.505, -0.09],\n        zoom: 13,\n        style: {\n          height: '100%',\n          width: '100%'\n        },\n        ref: mapRef,\n        children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n          url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n          attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LocationMarker, {\n          onLocationSelect: onLocationSelect\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), selectedLocation && /*#__PURE__*/_jsxDEV(Marker, {\n          position: [selectedLocation.lat, selectedLocation.lng]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleFindMyLocation,\n      className: \"absolute top-4 right-4 bg-gray-800 px-4 py-2 rounded-lg shadow-lg text-sm font-medium text-gray-200 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 z-[1000] border border-gray-700 transition-colors\",\n      children: \"Find My Location\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-16 right-4 bg-red-900/50 border border-red-700 text-red-200 px-4 py-2 rounded-lg shadow-lg text-sm z-[1000]\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n}\n_s2(Map, \"I10IuXRZu5g074aR+GypkLya9wY=\");\n_c2 = Map;\nexport default Map;\nvar _c, _c2;\n$RefreshReg$(_c, \"LocationMarker\");\n$RefreshReg$(_c2, \"Map\");","map":{"version":3,"names":["React","useEffect","useRef","useState","MapContainer","TileLayer","Marker","useMapEvents","L","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","require","iconUrl","shadowUrl","LocationMarker","onLocationSelect","_s","map","click","e","lat","latlng","lng","_c","Map","selectedLocation","modalOpen","_s2","mapRef","error","setError","current","setView","paneSelectors","forEach","sel","document","querySelectorAll","el","dataset","prevZ","style","zIndex","undefined","handleFindMyLocation","navigator","geolocation","getCurrentPosition","position","latitude","longitude","coords","location","code","PERMISSION_DENIED","POSITION_UNAVAILABLE","TIMEOUT","className","children","center","zoom","height","width","ref","url","attribution","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c2","$RefreshReg$"],"sources":["C:/Users/Venushan/Downloads/reporting/frontend/src/components/Map.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, useMapEvents } from 'react-leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport L from 'leaflet';\r\n\r\n// Fix for default marker icons in Leaflet with React\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\r\n  iconUrl: require('leaflet/dist/images/marker-icon.png'),\r\n  shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\r\n});\r\n\r\nfunction LocationMarker({ onLocationSelect }) {\r\n  const map = useMapEvents({\r\n    click(e) {\r\n      onLocationSelect({\r\n        lat: e.latlng.lat,\r\n        lng: e.latlng.lng\r\n      });\r\n    },\r\n  });\r\n\r\n  return null;\r\n}\r\n\r\nfunction Map({ onLocationSelect, selectedLocation, modalOpen }) {\r\n  const mapRef = useRef(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (mapRef.current && selectedLocation) {\r\n      mapRef.current.setView([selectedLocation.lat, selectedLocation.lng], 15);\r\n    }\r\n  }, [selectedLocation]);\r\n\r\n  // Lower z-index of all Leaflet panes when modal is open\r\n  useEffect(() => {\r\n    const paneSelectors = [\r\n      '.leaflet-container',\r\n      '.leaflet-pane',\r\n      '.leaflet-map-pane',\r\n      '.leaflet-tile-pane',\r\n      '.leaflet-marker-pane',\r\n      '.leaflet-shadow-pane',\r\n      '.leaflet-overlay-pane',\r\n      '.leaflet-tooltip-pane',\r\n      '.leaflet-popup-pane',\r\n    ];\r\n    if (modalOpen) {\r\n      paneSelectors.forEach(sel => {\r\n        document.querySelectorAll(sel).forEach(el => {\r\n          el.dataset.prevZ = el.style.zIndex;\r\n          el.style.zIndex = '1';\r\n        });\r\n      });\r\n    } else {\r\n      paneSelectors.forEach(sel => {\r\n        document.querySelectorAll(sel).forEach(el => {\r\n          if (el.dataset.prevZ !== undefined) {\r\n            el.style.zIndex = el.dataset.prevZ;\r\n            delete el.dataset.prevZ;\r\n          } else {\r\n            el.style.zIndex = '';\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }, [modalOpen]);\r\n\r\n  const handleFindMyLocation = () => {\r\n    if (!navigator.geolocation) {\r\n      setError('Geolocation is not supported by your browser');\r\n      return;\r\n    }\r\n\r\n    setError(null);\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        const { latitude, longitude } = position.coords;\r\n        const location = { lat: latitude, lng: longitude };\r\n        onLocationSelect(location);\r\n        if (mapRef.current) {\r\n          mapRef.current.setView([latitude, longitude], 15);\r\n        }\r\n      },\r\n      (error) => {\r\n        switch (error.code) {\r\n          case error.PERMISSION_DENIED:\r\n            setError('Please allow location access to use this feature');\r\n            break;\r\n          case error.POSITION_UNAVAILABLE:\r\n            setError('Location information is unavailable');\r\n            break;\r\n          case error.TIMEOUT:\r\n            setError('Location request timed out');\r\n            break;\r\n          default:\r\n            setError('An error occurred while getting your location');\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <div className=\"h-[400px] w-full rounded-lg overflow-hidden shadow-xl border border-gray-700\">\r\n        <MapContainer\r\n          center={[51.505, -0.09]}\r\n          zoom={13}\r\n          style={{ height: '100%', width: '100%' }}\r\n          ref={mapRef}\r\n        >\r\n          <TileLayer\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n          />\r\n          <LocationMarker onLocationSelect={onLocationSelect} />\r\n          {selectedLocation && (\r\n            <Marker\r\n              position={[selectedLocation.lat, selectedLocation.lng]}\r\n            />\r\n          )}\r\n        </MapContainer>\r\n      </div>\r\n      \r\n      <button\r\n        onClick={handleFindMyLocation}\r\n        className=\"absolute top-4 right-4 bg-gray-800 px-4 py-2 rounded-lg shadow-lg text-sm font-medium text-gray-200 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 z-[1000] border border-gray-700 transition-colors\"\r\n      >\r\n        Find My Location\r\n      </button>\r\n\r\n      {error && (\r\n        <div className=\"absolute top-16 right-4 bg-red-900/50 border border-red-700 text-red-200 px-4 py-2 rounded-lg shadow-lg text-sm z-[1000]\">\r\n          {error}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Map; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}